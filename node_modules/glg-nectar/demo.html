<!doctype html>

<html>
  <head>
    <title>glg-nectar</title>
    <script src="http://localhost:35729/livereload.js"></script>
    <script src="node_modules/polymer/platform.js"></script>
    <link rel="import" href="node_modules/polymer/polymer.html">
    <link rel="stylesheet" href="node_modules/ui-fonts/build/font-awesome.css">
    <link rel="import" href="node_modules/ui-typeahead/build/ui-typeahead.html">
    <link rel="import" href="build/glg-nectar.html">
    <style>
      body {
        font-family: "Helvetica Neue", "Helvetica", Arial;
        color: #454545;
      }

      ui-typeahead {
        width: 50%;
      }

      ui-typeahead-item {
        background: #fff;
        padding: .65em;
      }

      ui-typeahead-item i {
        margin-right: .3em;
        color: #666;
      }

      ui-typeahead-item[focused] {
        background: #eee;
      }

      ui-typeahead-item[selected] {
        background:#fff;
      }

      .separator {
        padding: .65em;
        background: #f3f3f3;
      }

      ui-typeahead[selected] ui-typeahead-item, ui-typeahead[selected] .separator {
        display:none;
      }

      ui-typeahead[selected] ui-typeahead-item[selected] {
        display:block;
        position: absolute;
        left:0;
        right:0;
      }

      ui-typeahead-item[selected]::before {
        float:right;
        content: "(change)";
        color: #89A5AF;
        
      }

      ui-typeahead-item[hide] {
        display:none;
      }

      p {
        font-size: 1.25em;
        width: 50%;
      }

    </style>
  </head>
  <body unresolved>
    <div id="holder">
      

      <!-- nectar wrapper -->
      <glg-nectar 
          urls="wss://nectar.glgroup.com/ws" 
          entities='["cm", "cm-localized"]'
          trigger="inputChange"
          limit="20"
          >

        <ui-typeahead 
          icon="fa-search"
          placeholder="Enter stuff">

              <template id="results" repeat="{{resultset}}">
                <div>
                  <div class="separator">
                    {{type}}
                  </div>
                  <template repeat="{{results}}">
                    
                    <ui-typeahead-item>
                      <i class="fa fa-user {{type}}"></i> 
                      <strong>{{name}}</strong> 
                      <span>{{title}}</span>                    
                    </ui-typeahead-item>

                  </template>
                </div>
              </template>

          </template>
        </ui-typeahead>
      </glg-nectar>

      <template repeat="{{items in resultset">
        stuff here....
      </template>



    </div>
    <script>
      

      document.addEventListener('polymer-ready', function() {
        //poke your element here
        var nectar = document.querySelector('glg-nectar');
        var template = document.querySelector('#results');
        

        nectar.addEventListener('results', function(evt) {
          
          template.model = evt.detail;
          Platform.performMicrotaskCheckpoint(); 
          console.log("template model updated", template.model);
        });
      });

    </script>
  </body>
</html>
