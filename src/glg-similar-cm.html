<link rel="import" href="../node_modules/glg-nectar/build/glg-nectar.html" />
<link rel="import" href="../node_modules/ui-toolkit/build/ui-toolkit.html" />
<polymer-element name="glg-similar-cm" attributes="limit entities results resultset trigger change cmid createdby">
<template>
  <link rel="stylesheet" href="./glg-similar-cm.less"/>
  <link rel="stylesheet" href="../node_modules/ui-fonts/build/font-awesome-styles.less"/>
  <content></content>
      <glg-nectar 
          id="nectar"
          urls='wss://nectar.glgroup.com/ws'
          entities='["cm", "cm-localized"]'
          trigger="inputChange"
          limit="{{limit}}"
          >
        <ui-typeahead 
          id="ta"
          icon="fa-search"
          placeholder="Enter stuff">
              <template id="results" repeat="{{resultset}}">
                  <template repeat="{{results}}">
                  <ui-typeahead-item id={{id}}>
                      <i class="fa fa-user {{type}}"></i> 
                      <strong>{{name}}</strong> 
                      <span>{{title}}</span>                    
                    </ui-typeahead-item>
                  </template>
              </template>
        </ui-typeahead>
      </glg-nectar>
      <core-ajax 
        id ="likecms"
        response={{resp}}
        handleAs="json">
        <div id="similarcms">
          <ul>
            <template  repeat="{{ item in resp }}">
            <li>{{item.FIRST_NAME}} {{item.MIDDLE_INITIAL}} {{item.LAST_NAME}} {{item.TITLE}} ({{item.COMPANY}}) <a id="{{item.RELATED_CM_ID}}" class="fa fa-times" on-click="{{removerel}}"></a></li>
            </template>
          </ul> 
        </div>
      </core-ajax>
      <core-ajax id="addrel"
        handleAs="json">
      </core-ajax>
      <core-ajax id="removerel"
        handleAs="json">
      </core-ajax>
</template>
<script src="./glg-similar-cm.litcoffee"></script>
</polymer-element>
